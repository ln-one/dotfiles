# Clash config file parsing
# Extract port info from Clash config and generate proxy config

# Use Clash {{ .config_type }} config file ({{ if eq .config_type "subscription" }}remote environment{{ else }}desktop environment{{ end }})
enabled = true
source = "{{ .config_type }}"
{{- if eq .config_type "subscription" }}
config_file = "{{ .config_file }}"
log_file = "clash.log"
{{- end }}
host = "127.0.0.1"
http_port = {{ .clash.port | default 7890 }}
socks_port = {{ index .clash "socks-port" | default 7891 }}
http_proxy = "http://127.0.0.1:{{ .clash.port | default 7890 }}"
https_proxy = "http://127.0.0.1:{{ .clash.port | default 7890 }}"
socks_proxy = "socks5://127.0.0.1:{{ index .clash "socks-port" | default 7891 }}"