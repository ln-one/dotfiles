# Zim 框架模块配置文件
# 此文件定义要加载的 Zim 模块
# 注意：此文件不会在 Zsh 启动时被 source，仅用于配置 zimfw 插件管理器

# zsh-defer 模块 - 必须最先加载以支持延迟执行
zmodule romkatv/zsh-defer

# 核心模块 - 提供基础的 Zsh 环境配置
zmodule environment
zmodule input
zmodule utility

{{- if not .features.enable_starship }}
# 如果不使用 Starship 提示符，则使用 Zim 内置提示符模块
zmodule duration-info
zmodule git-info
zmodule asciiship
{{- end }}

{{- if .features.enable_fzf }}
# fzf 模糊搜索集成 - 由自定义配置管理，不使用 Zim 模块以支持 defer
# 注意: fzf 初始化在 fzf-config.sh 中处理（支持 zsh-defer）
{{- end }}

# 补全系统配置 - 延迟加载以加速启动
# 注意: 补全系统初始化在 shell-common.sh 中通过 zsh-defer 处理
# zsh-users/zsh-completions 提供额外的补全定义
zmodule zsh-users/zsh-completions --fpath src
# completion 模块 - 通过 shell-common.sh 延迟加载，这里注释掉避免重复
# zmodule completion

# 以下模块必须最后加载以确保正确的功能
# 语法高亮模块 - 延迟加载以加速启动
# 注意: 语法高亮初始化在 shell-common.sh 中通过 zsh-defer 处理
# zmodule zsh-users/zsh-syntax-highlighting
# 自动建议模块
zmodule zsh-users/zsh-autosuggestions
# 历史子字符串搜索 - 支持按前缀搜索历史命令
zmodule zsh-users/zsh-history-substring-search