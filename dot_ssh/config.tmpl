# ===============================
# Personal server Aliyun (1Password keys)
# ===============================
Host aliyun  
    HostName "{{ .secrets.aliyun_server_url }}"
    User "{{ .secrets.aliyun_server_username }}"
    IdentityAgent ~/.1password/agent.sock

# ===============================
# GitHub (1Password keys)
# ===============================
Host github.com
    HostName ssh.github.com
    User git
    Port 443
    IdentityAgent ~/.1password/agent.sock
{{- if .features.enable_proxy }}
    ProxyCommand nc -X 5 -x 127.0.0.1:7891 %h %p
{{- end }}

# ===============================
# YubiKey-only hosts
# ===============================
Host secure-server yubikey-*
    IdentityAgent $SSH_AUTH_SOCK  # Will point to YubiKey agent dynamically

# ===============================
# Default for all other hosts
# ===============================
Host *
    IdentityAgent ~/.1password/agent.sock