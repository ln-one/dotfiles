# ===============================
# Personal server Aliyun (1Password keys)
# ===============================
Host aliyun  
    HostName "{{ .secrets.aliyun_server_url }}"
    User "{{ .secrets.aliyun_server_username }}"
    IdentityAgent ~/.1password/agent.sock

# ===============================
# GitHub (1Password keys)
# ===============================
Host github.com
    HostName ssh.github.com
    User git
    Port 443
    IdentityAgent ~/.1password/agent.sock
{{- if and .features.enable_proxy .proxy.enabled }}
    {{- if hasKey .proxy "socks_port" }}
    ProxyCommand nc -X 5 -x {{ .proxy.host }}:{{ .proxy.socks_port }} %h %p
    {{- end }}
{{- end }}

# ===============================
# YubiKey-only hosts
# ===============================
Host secure-server yubikey-*
    IdentityAgent $SSH_AUTH_SOCK  # Will point to YubiKey agent dynamically

# ===============================
# Default for all other hosts
# ===============================
Host *
    IdentityAgent ~/.1password/agent.sock